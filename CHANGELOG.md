# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased] - 2024-03-07

### Added
  
### Changed

### Deprecated

### Removed

### Fixed

### Dependencies
* Bump cicirello/pyaction from 4.25.0 to 4.29.0

### CI/CD


## [1.3.7] - 2023-10-05

### Fixed
* Fix minor bug in regex used to detect if an html file was generated by Javadoc.
* Fix minor bug in regex used to detect if an html file is a redirect, such as in javadocs for libraries that define a JPMS module.
* Fix minor bug in regex used to detect if a Javadoc page already specified a viewport directive, such as in Java 16+.

### Dependencies
* Bump cicirello/pyaction from 4.11.1 to 4.25.0, including upgrading Python within the Docker container to 3.12.

### CI/CD
* Bump Python to 3.12 in CI/CD workflows when running unit tests.


## [1.3.6] - 2022-10-24

### Fixed
* Some users may be using the action on a self-hosted runner not yet updated to a version supporting the new GitHub Actions `GITHUB_OUTPUT` environment file. This patch adds backwards compatibility for those users (e.g., it falls back to using the deprecated `set-output` if `GITHUB_OUTPUT` doesn't exist).

### Dependencies
* Bump cicirello/pyaction from 4.11.0 to 4.11.1


## [1.3.5] - 2022-10-20

### Fixed
* Replaced the usage of GitHub Action's deprecated `set-output` with the new `$GITHUB_OUTPUT` env file.

### Dependencies
* Bump cicirello/pyaction from 4.7.1 to 4.11.0, including upgrading Python within the Docker container to 3.10.7


## [1.3.4] - 2022-09-02

### Fixed
* Added missing new line character to improve readability of the generated javadoc-cleanup 
  block. 


## [1.3.3] - 2022-09-02

### Fixed
* Correctly handle cases of javadoc redirected pages, such as when javadoc generates a
  redirect from root of javadoc to a module page when Java Platform Module System is used.
  This includes not inserting a redundant canonical link, and also includes directing search
  engines to noindex and follow such redirected pages.

### Dependencies
* Bump cicirello/pyaction from 4.3.0 to 4.7.1


## [1.3.2] - 2022-03-18

### Changed
* Bumped base Docker image cicirello/pyaction from 4.2.0 to 4.3.0.

### Fixed
* Fixed issue for recent Java versions (Java 16+) where a redundant meta viewport
  directive was inserted by javadoc-cleanup. This is not needed for Java 16+ because
  javadoc properly defines viewport.
* Fixed issue in parsing the "Generated by javadoc" comment for versions of javadoc that
  include a version string in that comment.


## [1.3.1] - 2022-03-04
  
### Changed
* Bumped python to 3.10.
* Changed base docker image to cicirello/pyaction:4.2.0.
* Now pulls base image from GitHub Container Registry under
  assumption that from actions it should be faster from GitHub than
  from Docker.

### Fixed
* Disabled pycache.


## [1.3.0] - 2021-05-26

### Added
* Ability to insert a user-defined block into the head of each javadoc page. The
  motivation of this was for the purpose of adding the ability to insert links to
  a favicon for the site. But exactly what is needed for this can vary greatly from
  one site to the next. This new feature is not limited to this use-case. It can be
  used to insert anything that is valid in the head of an html page into every
  javadoc generated page.
  
### Changed
* Changed tag used to pull base docker image from `latest` to `3` (the current
  latest major release tag) to ensure we don't accidentally pick up breaking 
  changes in future releases of base image.
* Refactored existing code to improve maintainability.


## [1.2.1] -2021-05-06

### Changed
* Various improvements to documentation, specifically to the example
  workflows.

### CI/CD
* Introduced major version tag.
* Enabled CodeQL code scanning on all push/pull-request events.
* Added integration testing to all push/pull-request events.

### Other
* Added changelog.


## [1.2.0] - 2020-10-15

### Added
* Now includes option to also generate and insert canonical URLs in head of each javadoc page.

### Changed
* Example workflows now assume Maven for running workflows, but can easily be adapted 
  to any other method of running javadoc.

## [1.1.0] - 2020-9-24

### Changed
* Switched to smaller docker base image, 
  [pyaction-lite](https://github.com/cicirello/pyaction-lite), to speed up action loading
* Updated example workflows in README

## [1.0.1] - 2020-9-23

### Fixed
* Minor bug fix: javadoc-cleaner is now prevented from 
  modifying non-javadoc html files, if any are present.

## [1.0.0] - 2020-9-22

### Added
* Initial release features improved browsing of javadocs on mobile devices.

